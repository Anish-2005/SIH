{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ANISH\\\\Documents\\\\PROJECTS\\\\Chatbot-for-FIR\\\\Frontend\\\\src\\\\pages\\\\Query.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport Sidebar from '../components/Sidebar';\nimport '../styles/Query.css';\nimport { FaMicrophone } from 'react-icons/fa';\nimport Footer from '../components/Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Query = () => {\n  _s();\n  const [query, setQuery] = useState('');\n  const [response, setResponse] = useState('Response will appear here...');\n  const [isListening, setIsListening] = useState(false);\n\n  // Web Speech API initialization\n  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n\n  // Wrap the initialization in useMemo to prevent re-creation on every render\n  const recognition = useMemo(() => {\n    const recog = new SpeechRecognition();\n    recog.continuous = false;\n    recog.interimResults = false;\n    recog.lang = 'en-US';\n    return recog;\n  }, [SpeechRecognition]);\n  useEffect(() => {\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setQuery(transcript);\n    };\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n    recognition.onerror = event => {\n      console.error(\"Speech recognition error:\", event.error);\n      setIsListening(false);\n    };\n  }, [recognition]);\n  const handleMicClick = () => {\n    if (isListening) {\n      recognition.stop();\n    } else {\n      recognition.start();\n    }\n    setIsListening(!isListening);\n  };\n  const handleInputChange = e => {\n    setQuery(e.target.value);\n  };\n  const handleQuerySubmit = async e => {\n    e.preventDefault();\n    const fullQuery = `${query}. You are an AI assistant with comprehensive knowledge of the Indian Constitution, including all applicable acts and sections. Your task is to assist law enforcement officers in filing an FIR by identifying and listing all relevant acts and sections that apply to the case presented. For each act or section, provide a brief explanation of its significance and how it applies to the case. Ensure that all applicable legal provisions are mentioned to help the officer file a thorough and accurate FIR.`;\n    try {\n      const response = await fetch('https://chatbot-for-fir-backend.vercel.app/api/gemini/generate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: fullQuery\n        })\n      });\n      const data = await response.json();\n      setResponse(parseMarkdownToHTML(data.response || 'No response received'));\n    } catch (error) {\n      console.error('Error fetching the response:', error);\n      setResponse('Error occurred while fetching the response');\n    }\n    setQuery(''); // Clear the input field after submission\n  };\n  const parseMarkdownToHTML = text => {\n    return text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"query-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"query-page-main-content bg-blue-50 py-8 px-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"query-page-title text-3xl font-bold text-blue-800 text-center mb-6\",\n        children: \"Ask a Query\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"query-response-box bg-white p-6 rounded-lg shadow-lg mb-8 max-w-4xl mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          dangerouslySetInnerHTML: {\n            __html: response\n          },\n          className: \"text-gray-700 font-medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"query-input-container max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg flex flex-col md:flex-row items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"query-input-box flex-grow mr-4\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Ask your query...\",\n            value: query,\n            onChange: handleInputChange,\n            className: \"query-text-input w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"query-mic-icon-container flex items-center justify-center mt-4 md:mt-0\",\n          children: /*#__PURE__*/_jsxDEV(FaMicrophone, {\n            className: `query-mic-icon text-3xl cursor-pointer ${isListening ? 'text-blue-600' : 'text-gray-500'}`,\n            onClick: handleMicClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"query-submit-btn-container mt-4 md:mt-0\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleQuerySubmit,\n            className: \"query-submit-btn bg-blue-600 text-white py-3 px-6 rounded-lg shadow-lg hover:bg-blue-700 transition duration-300\",\n            children: \"Enter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(Query, \"blUeMJJEjM2Smb55I0NS8/7zTlE=\");\n_c = Query;\nexport default Query;\nvar _c;\n$RefreshReg$(_c, \"Query\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Sidebar","FaMicrophone","Footer","jsxDEV","_jsxDEV","Query","_s","query","setQuery","response","setResponse","isListening","setIsListening","SpeechRecognition","window","webkitSpeechRecognition","recognition","recog","continuous","interimResults","lang","onresult","event","transcript","results","onend","onerror","console","error","handleMicClick","stop","start","handleInputChange","e","target","value","handleQuerySubmit","preventDefault","fullQuery","fetch","method","headers","body","JSON","stringify","data","json","parseMarkdownToHTML","text","replace","className","children","fileName","_jsxFileName","lineNumber","columnNumber","dangerouslySetInnerHTML","__html","type","placeholder","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/ANISH/Documents/PROJECTS/Chatbot-for-FIR/Frontend/src/pages/Query.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport Sidebar from '../components/Sidebar';\r\nimport '../styles/Query.css';\r\nimport { FaMicrophone } from 'react-icons/fa';\r\nimport Footer from '../components/Footer';\r\n\r\nconst Query = () => {\r\n  const [query, setQuery] = useState('');\r\n  const [response, setResponse] = useState('Response will appear here...');\r\n  const [isListening, setIsListening] = useState(false);\r\n\r\n  // Web Speech API initialization\r\n  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n\r\n  // Wrap the initialization in useMemo to prevent re-creation on every render\r\n  const recognition = useMemo(() => {\r\n    const recog = new SpeechRecognition();\r\n    recog.continuous = false;\r\n    recog.interimResults = false;\r\n    recog.lang = 'en-US';\r\n    return recog;\r\n  }, [SpeechRecognition]);\r\n\r\n  useEffect(() => {\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      setQuery(transcript);\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      console.error(\"Speech recognition error:\", event.error);\r\n      setIsListening(false);\r\n    };\r\n  }, [recognition]);\r\n\r\n  const handleMicClick = () => {\r\n    if (isListening) {\r\n      recognition.stop();\r\n    } else {\r\n      recognition.start();\r\n    }\r\n    setIsListening(!isListening);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setQuery(e.target.value);\r\n  };\r\n\r\n  const handleQuerySubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const fullQuery = `${query}. You are an AI assistant with comprehensive knowledge of the Indian Constitution, including all applicable acts and sections. Your task is to assist law enforcement officers in filing an FIR by identifying and listing all relevant acts and sections that apply to the case presented. For each act or section, provide a brief explanation of its significance and how it applies to the case. Ensure that all applicable legal provisions are mentioned to help the officer file a thorough and accurate FIR.`;\r\n\r\n    try {\r\n      const response = await fetch('https://chatbot-for-fir-backend.vercel.app/api/gemini/generate', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ query: fullQuery }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      setResponse(parseMarkdownToHTML(data.response || 'No response received'));\r\n    } catch (error) {\r\n      console.error('Error fetching the response:', error);\r\n      setResponse('Error occurred while fetching the response');\r\n    }\r\n\r\n    setQuery(''); // Clear the input field after submission\r\n  };\r\n\r\n  const parseMarkdownToHTML = (text) => {\r\n    return text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\r\n  };\r\n\r\n  return (\r\n    <div className=\"query-page-container\">\r\n      {/* Sidebar */}\r\n      <Sidebar />\r\n\r\n      <main className=\"query-page-main-content bg-blue-50 py-8 px-6\">\r\n  <h2 className=\"query-page-title text-3xl font-bold text-blue-800 text-center mb-6\">\r\n    Ask a Query\r\n  </h2>\r\n\r\n  {/* Query Response Box */}\r\n  <div className=\"query-response-box bg-white p-6 rounded-lg shadow-lg mb-8 max-w-4xl mx-auto\">\r\n    <pre dangerouslySetInnerHTML={{ __html: response }} className=\"text-gray-700 font-medium\"></pre>\r\n  </div>\r\n\r\n  {/* Query Input Section */}\r\n  <div className=\"query-input-container max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg flex flex-col md:flex-row items-center justify-between\">\r\n    {/* Input Box */}\r\n    <div className=\"query-input-box flex-grow mr-4\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Ask your query...\"\r\n        value={query}\r\n        onChange={handleInputChange}\r\n        className=\"query-text-input w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600\"\r\n      />\r\n    </div>\r\n\r\n    {/* Microphone Icon */}\r\n    <div className=\"query-mic-icon-container flex items-center justify-center mt-4 md:mt-0\">\r\n      <FaMicrophone\r\n        className={`query-mic-icon text-3xl cursor-pointer ${isListening ? 'text-blue-600' : 'text-gray-500'}`}\r\n        onClick={handleMicClick}\r\n      />\r\n    </div>\r\n\r\n    {/* Submit Button */}\r\n    <div className=\"query-submit-btn-container mt-4 md:mt-0\">\r\n      <button\r\n        onClick={handleQuerySubmit}\r\n        className=\"query-submit-btn bg-blue-600 text-white py-3 px-6 rounded-lg shadow-lg hover:bg-blue-700 transition duration-300\"\r\n      >\r\n        Enter\r\n      </button>\r\n    </div>\r\n  </div>\r\n</main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Query;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
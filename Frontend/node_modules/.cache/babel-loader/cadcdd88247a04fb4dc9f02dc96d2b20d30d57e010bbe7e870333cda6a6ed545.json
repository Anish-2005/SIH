{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ANISH\\\\Documents\\\\PROJECTS\\\\Chatbot-for-FIR\\\\Frontend\\\\src\\\\pages\\\\Query.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { ThemeContext } from '../ThemeContext';\nimport Sidebar from '../components/Sidebar';\nimport MenuBar from '../components/MenuBar'; // Import the MenuBar component\nimport '../styles/Query.css';\nimport { FaMicrophone } from 'react-icons/fa';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Query = () => {\n  _s();\n  const {\n    theme,\n    toggleTheme\n  } = useContext(ThemeContext);\n  const [query, setQuery] = useState('');\n  const [response, setResponse] = useState('Response will appear here...');\n  const [isListening, setIsListening] = useState(false);\n\n  // Web Speech API initialization\n  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n  const recognition = new SpeechRecognition();\n  recognition.continuous = false;\n  recognition.interimResults = false;\n  recognition.lang = 'en-US';\n  useEffect(() => {\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setQuery(transcript);\n    };\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n    recognition.onerror = event => {\n      console.error(\"Speech recognition error:\", event.error);\n      setIsListening(false);\n    };\n  }, [recognition]);\n  const handleMicClick = () => {\n    if (isListening) {\n      recognition.stop();\n    } else {\n      recognition.start();\n    }\n    setIsListening(!isListening);\n  };\n  const handleInputChange = e => {\n    setQuery(e.target.value);\n  };\n  const handleQuerySubmit = async e => {\n    e.preventDefault();\n    const fullQuery = `${query}. You are an AI assistant with comprehensive knowledge of the Indian Constitution, including all applicable acts and sections. Your task is to assist law enforcement officers in filing an FIR by identifying and listing all relevant acts and sections that apply to the case presented. For each act or section, provide a brief explanation of its significance and how it applies to the case. Ensure that all applicable legal provisions are mentioned to help the officer file a thorough and accurate FIR.`;\n    try {\n      const response = await fetch('http://localhost:5000/api/gemini/generate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: fullQuery\n        }) // Send full query to Gemini\n      });\n      const data = await response.json();\n      setResponse(parseMarkdownToHTML(data.response || 'No response received'));\n    } catch (error) {\n      console.error('Error fetching the response:', error);\n      setResponse('Error occurred while fetching the response');\n    }\n    setQuery(''); // Clear the input field after submission\n  };\n\n  // Helper function to convert **text** to <strong>text</strong> for bolding\n  const parseMarkdownToHTML = text => {\n    // Replace markdown **bold** with <strong> tags\n    return text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `query-page-container ${theme}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-container\",\n      children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-bar-container\",\n      children: /*#__PURE__*/_jsxDEV(MenuBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"query-page-main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"theme-toggle\",\n        onClick: toggleTheme,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-icons\",\n          children: theme === 'light' ? 'dark_mode' : 'light_mode'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"query-page-title\",\n        children: \"Ask a Query\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `query-response-box ${theme}`,\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          dangerouslySetInnerHTML: {\n            __html: response\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"query-input-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `query-input-box ${theme}`,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Ask your query...\",\n            value: query,\n            onChange: handleInputChange,\n            className: `query-text-input ${theme}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FaMicrophone, {\n            className: `query-mic-icon ${isListening ? 'listening' : ''} ${theme}`,\n            onClick: handleMicClick\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleQuerySubmit,\n            className: `query-submit-btn ${theme}`,\n            children: \"Enter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(Query, \"YeFK5XhxG7Q5n3ZmgUw1abU0GzE=\");\n_c = Query;\nexport default Query;\nvar _c;\n$RefreshReg$(_c, \"Query\");","map":{"version":3,"names":["React","useContext","useState","useEffect","ThemeContext","Sidebar","MenuBar","FaMicrophone","jsxDEV","_jsxDEV","Query","_s","theme","toggleTheme","query","setQuery","response","setResponse","isListening","setIsListening","SpeechRecognition","window","webkitSpeechRecognition","recognition","continuous","interimResults","lang","onresult","event","transcript","results","onend","onerror","console","error","handleMicClick","stop","start","handleInputChange","e","target","value","handleQuerySubmit","preventDefault","fullQuery","fetch","method","headers","body","JSON","stringify","data","json","parseMarkdownToHTML","text","replace","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","dangerouslySetInnerHTML","__html","type","placeholder","onChange","_c","$RefreshReg$"],"sources":["C:/Users/ANISH/Documents/PROJECTS/Chatbot-for-FIR/Frontend/src/pages/Query.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { ThemeContext } from '../ThemeContext';\r\nimport Sidebar from '../components/Sidebar';\r\nimport MenuBar from '../components/MenuBar'; // Import the MenuBar component\r\nimport '../styles/Query.css';\r\nimport { FaMicrophone } from 'react-icons/fa';\r\n\r\nconst Query = () => {\r\n  const { theme, toggleTheme } = useContext(ThemeContext);\r\n  const [query, setQuery] = useState('');\r\n  const [response, setResponse] = useState('Response will appear here...');\r\n  const [isListening, setIsListening] = useState(false);\r\n\r\n  // Web Speech API initialization\r\n  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n  const recognition = new SpeechRecognition();\r\n\r\n  recognition.continuous = false;\r\n  recognition.interimResults = false;\r\n  recognition.lang = 'en-US';\r\n\r\n  useEffect(() => {\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      setQuery(transcript);\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      console.error(\"Speech recognition error:\", event.error);\r\n      setIsListening(false);\r\n    };\r\n  }, [recognition]);\r\n\r\n  const handleMicClick = () => {\r\n    if (isListening) {\r\n      recognition.stop();\r\n    } else {\r\n      recognition.start();\r\n    }\r\n    setIsListening(!isListening);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setQuery(e.target.value);\r\n  };\r\n\r\n  const handleQuerySubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const fullQuery = `${query}. You are an AI assistant with comprehensive knowledge of the Indian Constitution, including all applicable acts and sections. Your task is to assist law enforcement officers in filing an FIR by identifying and listing all relevant acts and sections that apply to the case presented. For each act or section, provide a brief explanation of its significance and how it applies to the case. Ensure that all applicable legal provisions are mentioned to help the officer file a thorough and accurate FIR.`;\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/gemini/generate', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ query: fullQuery }), // Send full query to Gemini\r\n      });\r\n\r\n      const data = await response.json();\r\n      setResponse(parseMarkdownToHTML(data.response || 'No response received'));\r\n    } catch (error) {\r\n      console.error('Error fetching the response:', error);\r\n      setResponse('Error occurred while fetching the response');\r\n    }\r\n\r\n    setQuery(''); // Clear the input field after submission\r\n  };\r\n\r\n  // Helper function to convert **text** to <strong>text</strong> for bolding\r\n  const parseMarkdownToHTML = (text) => {\r\n    // Replace markdown **bold** with <strong> tags\r\n    return text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\r\n  };\r\n\r\n  return (\r\n    <div className={`query-page-container ${theme}`}>\r\n      {/* Display Sidebar on larger screens, MenuBar on mobile */}\r\n      <div className=\"sidebar-container\">\r\n        <Sidebar />\r\n      </div>\r\n      <div className=\"menu-bar-container\">\r\n        <MenuBar />\r\n      </div>\r\n\r\n      <main className=\"query-page-main-content\">\r\n        <div className=\"theme-toggle\" onClick={toggleTheme}>\r\n          <span className=\"material-icons\">\r\n            {theme === 'light' ? 'dark_mode' : 'light_mode'}\r\n          </span>\r\n        </div>\r\n\r\n        <h2 className=\"query-page-title\">Ask a Query</h2>\r\n\r\n        {/* Response Field */}\r\n        <div className={`query-response-box ${theme}`}>\r\n          <pre dangerouslySetInnerHTML={{ __html: response }} />\r\n        </div>\r\n\r\n        {/* Input Section */}\r\n        <div className=\"query-input-container\">\r\n          <div className={`query-input-box ${theme}`}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Ask your query...\"\r\n              value={query}\r\n              onChange={handleInputChange}\r\n              className={`query-text-input ${theme}`}\r\n            />\r\n            <FaMicrophone\r\n              className={`query-mic-icon ${isListening ? 'listening' : ''} ${theme}`}\r\n              onClick={handleMicClick}\r\n            />\r\n            <button onClick={handleQuerySubmit} className={`query-submit-btn ${theme}`}>\r\n              Enter\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Query;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}